<header class="header">

    <div class="menu-container">

        <div class="menu-infos">
            <!-- Logo -->
            <div class="logo">
                <a routerLink="/"><img src="logo.png" alt="Logo Workhaus" class="main-logo" /></a>
            </div>

            <!-- Barre de recherche -->
            <div class="search-bar">
                <input type="text" placeholder="Rechercher un produit..." (input)="search.set($any($event.target).value)" class="search-input"/>
                
                @if(search() && filteredProducts().length > 0){
                    
                    <ul class="search-results">
                        @for(product of filteredProducts(); track product.id){
                            
                            <li>
                                <a [routerLink]="['/produits', product.id]">{{product.name}}</a>
                            </li>
                        }
                    </ul>
                }@else if(search()){
                    <p class="no-results">Aucun produit trouvé</p>
                }
            </div>

            <!-- Infos rapides -->
            <div class="info-icons">
                <div class="info-item">
                    <a routerLink="a-propos"><i class="fas fa-info-circle" style="font-size: 24px;color: rgb(4, 185, 4);"></i></a>
                    <p>À propos</p>
                </div>
                <div class="info-item">
                    <a [routerLink]="isUserConnected() ? '/mon-compte' : '/login'"><i class="fas fa-user-alt" style="font-size: 24px; color: rgb(113, 113, 255);"></i></a>
                    <p>{{isUserConnected()}}</p>
                </div>
                @if(isUserAuthed()){
                    <div class="info-item">
                        <a href="#" (click)="logOut($event)">
                        <i class="fa fa-sign-out" aria-hidden="true" style="font-size: 24px;color: red;"></i>
                            <p>Se déconnecter</p>
                        </a>
                    </div>
                }
                <div class="cart-icon">
                    <a routerLink="/panier">
                        <i class='fas fa-shopping-cart' style='font-size:24px;color:rgb(247, 60, 60);'></i>
                        <span class="cart-badge"></span>
                    </a>
                </div>
            </div>

            <div class="socials">
                <a href="http://www.twitter.com">
                    <i class='fab fa-twitter' style='font-size:24px;color:rgb(148, 148, 252);'></i>
                </a>
                <a href="http://www.instagram.com">
                    <i class='fab fa-instagram' style='font-size:24px;color:rgb(204, 81, 10);'></i>
                </a>
                <a href="http://www.facebook.com">
                    <i class='fab fa-facebook' style='font-size:24px;color:blue;'></i>
                </a>
            </div>
        </div>

        <div class="flex-menu">
            <div class="menu-icon">
                <button style="font-size:24px" class="button-menu" (click)="toggleMenu()">
                    <i class="material-icons">menu</i>
                    Tous les produits
                </button>
            </div>
            <nav class="nav-menu">
                <a routerLink="/mobilier">Mobilier ergonomique</a>
                <a routerLink="/accessoires">Accessoires</a>
                <a routerLink="/rangements">Rangements</a>
                <a routerLink="/tech">Tech & Gadgets</a>
                <a routerLink="/tables">Tables</a>
                <a routerLink="/sieges-fauteuils">Sièges & fauteuils</a>
            </nav>

        </div>

    </div>

</header>

<!-- Menu mobile qui s'affiche quand isMenuOpen() est true -->
<div class="mobile-menu-overlay" [class.active]="isMenuOpen()" (click)="toggleMenu()"></div>

<div class="mobile-menu-container" [class.open]="isMenuOpen()">
    <div class="mobile-menu-header">
        <button class="close-menu" (click)="toggleMenu()">
            <i class="fas fa-times"></i>
        </button>
        <h3>Menu</h3>
    </div>
    
    <nav class="mobile-nav-menu">
        <a routerLink="/mobilier" (click)="toggleMenu()">Mobilier ergonomique</a>
        <a routerLink="/accessoires" (click)="toggleMenu()">Accessoires</a>
        <a routerLink="/rangements" (click)="toggleMenu()">Rangements</a>
        <a routerLink="/tech" (click)="toggleMenu()">Tech & Gadgets</a>
        <a routerLink="/tables" (click)="toggleMenu()">Tables</a>
        <a routerLink="/sieges-fauteuils" (click)="toggleMenu()">Sièges & fauteuils</a>
    </nav>
</div>